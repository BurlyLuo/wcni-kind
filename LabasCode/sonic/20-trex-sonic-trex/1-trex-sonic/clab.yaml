name: vs
topology:
  nodes:
    sonic:
      kind: sonic-vm
      image: 192.168.2.100:5000/sonic:202305

    client:
      kind: linux
      image: 192.168.2.100:5000/trexcisco/trex:4.1
      exec:
        - ip addr add 10.1.5.10/24 dev eth1
        - ip addr add 10.1.5.11/24 dev eth2
      binds:
        - ./imix.py:/root/imix.py

      ports:
        - 4507:4507
        - 4500:4500
        - 4501:4501
     
      env:
        COLUMNS: "130"
        LINES: "100"
      # port0: 10.1.5.10 eth1
      # port1: 10.1.5.11 eth2
 
      # Run TRex in Stateless mode
      # ./t-rex-64 -i
      
      # Start traffic on port 0 (imix profile)
      # ./trex-console
      # start -f /root/imix.py -m 10kpps --port 0
      # tui

  links:
    # eth1 <> Ethernet0
    # eth2 <> Ethernet4
    # eth3 <> Ethernet8
    # eth4 <> Ethernet12
    - endpoints: ["sonic:eth1", "client:eth1"]
    - endpoints: ["sonic:eth2", "client:eth2"]
