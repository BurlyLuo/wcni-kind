# 发的包的Length x  1280<x<1500.这样MSS就是1280-40=1240，就会分片了。
curl -H "X-Extra-Data: This is additional data12333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333102933333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333" 10.1.8.10

ip route get 10.1.8.10

这里给出一个在gw1上的全量抓包：{ tcpdump -i any }
核心的内容是：先用大的tcp 握手的大的MTU发，但是被路由器告知MTU最大是1280，随即就用小的MTU重传了。因为TCP，通常是：.1.. .... = Don't fragment: Set[不许分片的]
[但是不是每一个场景中都能有：Destination unreachable (Fragmentation needed)，有就重发，没有就丢弃]
3	2025-09-03 06:28:19.224812	10.1.5.10	10.1.8.10	TCP	80	0x54f6 (21750)	0	0	1	35814	80	35814 → 80 [SYN] Seq=0 Win=56760 Len=0 MSS=9460 SACK_PERM TSval=2055847102 TSecr=0 WS=128
4	2025-09-03 06:28:19.224869			ARP	48							Who has 1.1.1.2? Tell 1.1.1.1
5	2025-09-03 06:28:19.224920			ARP	48							1.1.1.2 is at aa:c1:ab:17:6f:2a
6	2025-09-03 06:28:19.224926	10.1.5.10	10.1.8.10	TCP	80	0x54f6 (21750)	0	0	1	35814	80	[TCP Retransmission] 35814 → 80 [SYN] Seq=0 Win=56760 Len=0 MSS=9460 SACK_PERM TSval=2055847102 TSecr=0 WS=128
7	2025-09-03 06:28:19.225079	10.1.8.10	10.1.5.10	TCP	80	0x0000 (0)	0	1	1	80	35814	80 → 35814 [SYN, ACK] Seq=0 Ack=1 Win=56688 Len=0 MSS=9460 SACK_PERM TSval=3945292478 TSecr=2055847102 WS=128
8	2025-09-03 06:28:19.225092	10.1.8.10	10.1.5.10	TCP	80	0x0000 (0)	0	1	1	80	35814	[TCP Retransmission] 80 → 35814 [SYN, ACK] Seq=0 Ack=1 Win=56688 Len=0 MSS=9460 SACK_PERM TSval=3945292478 TSecr=2055847102 WS=128
9	2025-09-03 06:28:19.225121	10.1.5.10	10.1.8.10	TCP	72	0x54f7 (21751)	1	1	1	35814	80	35814 → 80 [ACK] Seq=1 Ack=1 Win=56832 Len=0 TSval=2055847102 TSecr=3945292478
10	2025-09-03 06:28:19.225130	10.1.5.10	10.1.8.10	TCP	72	0x54f7 (21751)	1	1	1	35814	80	[TCP Dup ACK 9#1] 35814 → 80 [ACK] Seq=1 Ack=1 Win=56832 Len=0 TSval=2055847102 TSecr=3945292478
11	2025-09-03 06:28:19.225280	10.1.5.10	10.1.8.10	HTTP	1311	0x54f8 (21752)	1	1	1240	35814	80	GET / HTTP/1.1 
12	2025-09-03 06:28:19.225411	10.1.5.1,10.1.5.10	10.1.5.10,10.1.8.10	ICMP	596	0xbce7 (48359),0x54f8 (21752)	3148108469	935602055		35814	80	Destination unreachable (Fragmentation needed)
13	2025-09-03 06:28:19.225518	10.1.5.10	10.1.8.10	TCP	1300	0x54f9 (21753)	1	1	1229	35814	80	[TCP Retransmission] 35814 → 80 [ACK] Seq=1 Ack=1 Win=56832 Len=1228 TSval=2055847103 TSecr=3945292478
14	2025-09-03 06:28:19.225531	10.1.5.10	10.1.8.10	TCP	1300	0x54f9 (21753)	1	1	1229	35814	80	[TCP Retransmission] 35814 → 80 [ACK] Seq=1 Ack=1 Win=56832 Len=1228 TSval=2055847103 TSecr=3945292478
15	2025-09-03 06:28:19.225533	10.1.5.10	10.1.8.10	TCP	83	0x54fa (21754)	1229	1	1240	35814	80	[TCP Retransmission] 35814 → 80 [PSH, ACK] Seq=1229 Ack=1 Win=56832 Len=11 TSval=2055847103 TSecr=3945292478
16	2025-09-03 06:28:19.225540	10.1.5.10	10.1.8.10	TCP	83	0x54fa (21754)	1229	1	1240	35814	80	[TCP Retransmission] 35814 → 80 [PSH, ACK] Seq=1229 Ack=1 Win=56832 Len=11 TSval=2055847103 TSecr=3945292478
17	2025-09-03 06:28:19.225652	10.1.8.10	10.1.5.10	TCP	72	0x98c8 (39112)	1	1229	1	80	35814	80 → 35814 [ACK] Seq=1 Ack=1229 Win=55552 Len=0 TSval=3945292479 TSecr=2055847103
18	2025-09-03 06:28:19.225663	10.1.8.10	10.1.5.10	TCP	72	0x98c8 (39112)	1	1229	1	80	35814	[TCP Dup ACK 17#1] 80 → 35814 [ACK] Seq=1 Ack=1229 Win=55552 Len=0 TSval=3945292479 TSecr=2055847103
19	2025-09-03 06:28:19.225665	10.1.8.10	10.1.5.10	TCP	72	0x98c9 (39113)	1	1240	1	80	35814	80 → 35814 [ACK] Seq=1 Ack=1240 Win=55552 Len=0 TSval=3945292479 TSecr=2055847103
20	2025-09-03 06:28:19.225672	10.1.8.10	10.1.5.10	TCP	72	0x98c9 (39113)	1	1240	1	80	35814	[TCP Dup ACK 19#1] 80 → 35814 [ACK] Seq=1 Ack=1240 Win=55552 Len=0 TSval=3945292479 TSecr=2055847103
21	2025-09-03 06:28:19.226047	10.1.8.10	10.1.5.10	TCP	303	0x98ca (39114)	1	1240	232	80	35814	80 → 35814 [PSH, ACK] Seq=1 Ack=1240 Win=55552 Len=231 TSval=3945292479 TSecr=2055847103 [TCP segment of a reassembled PDU]
22	2025-09-03 06:28:19.226058	10.1.8.10	10.1.5.10	TCP	303	0x98ca (39114)	1	1240	232	80	35814	[TCP Retransmission] 80 → 35814 [PSH, ACK] Seq=1 Ack=1240 Win=55552 Len=231 TSval=3945292479 TSecr=2055847103
23	2025-09-03 06:28:19.226101	10.1.5.10	10.1.8.10	TCP	72	0x54fb (21755)	1240	232	1240	35814	80	35814 → 80 [ACK] Seq=1240 Ack=232 Win=56704 Len=0 TSval=2055847103 TSecr=3945292479
24	2025-09-03 06:28:19.226113	10.1.5.10	10.1.8.10	TCP	72	0x54fb (21755)	1240	232	1240	35814	80	[TCP Dup ACK 23#1] 35814 → 80 [ACK] Seq=1240 Ack=232 Win=56704 Len=0 TSval=2055847103 TSecr=3945292479
25	2025-09-03 06:28:19.226233	10.1.8.10	10.1.5.10	HTTP	118	0x98cb (39115)	232	1240	278	80	35814	HTTP/1.1 200 OK  (text/html)
26	2025-09-03 06:28:19.226243	10.1.8.10	10.1.5.10	TCP	118	0x98cb (39115)	232	1240	278	80	35814	[TCP Retransmission] 80 → 35814 [PSH, ACK] Seq=232 Ack=1240 Win=55552 Len=46 TSval=3945292479 TSecr=2055847103
27	2025-09-03 06:28:19.226444	10.1.5.10	10.1.8.10	TCP	72	0x54fc (21756)	1240	278	1240	35814	80	35814 → 80 [ACK] Seq=1240 Ack=278 Win=56704 Len=0 TSval=2055847103 TSecr=3945292479
28	2025-09-03 06:28:19.226458	10.1.5.10	10.1.8.10	TCP	72	0x54fc (21756)	1240	278	1240	35814	80	[TCP Dup ACK 27#1] 35814 → 80 [ACK] Seq=1240 Ack=278 Win=56704 Len=0 TSval=2055847103 TSecr=3945292479
29	2025-09-03 06:28:19.226579	10.1.5.10	10.1.8.10	TCP	72	0x54fd (21757)	1240	278	1241	35814	80	35814 → 80 [FIN, ACK] Seq=1240 Ack=278 Win=56704 Len=0 TSval=2055847104 TSecr=3945292479
30	2025-09-03 06:28:19.226597	10.1.5.10	10.1.8.10	TCP	72	0x54fd (21757)	1240	278	1241	35814	80	[TCP Retransmission] 35814 → 80 [FIN, ACK] Seq=1240 Ack=278 Win=56704 Len=0 TSval=2055847104 TSecr=3945292479
31	2025-09-03 06:28:19.227244	10.1.8.10	10.1.5.10	TCP	72	0x98cc (39116)	278	1241	279	80	35814	80 → 35814 [FIN, ACK] Seq=278 Ack=1241 Win=55552 Len=0 TSval=3945292480 TSecr=2055847104
32	2025-09-03 06:28:19.227259	10.1.8.10	10.1.5.10	TCP	72	0x98cc (39116)	278	1241	279	80	35814	[TCP Retransmission] 80 → 35814 [FIN, ACK] Seq=278 Ack=1241 Win=55552 Len=0 TSval=3945292480 TSecr=2055847104
33	2025-09-03 06:28:19.227291	10.1.5.10	10.1.8.10	TCP	72	0x54fe (21758)	1241	279	1241	35814	80	35814 → 80 [ACK] Seq=1241 Ack=279 Win=56704 Len=0 TSval=2055847105 TSecr=3945292480
34	2025-09-03 06:28:19.227307	10.1.5.10	10.1.8.10	TCP	72	0x54fe (21758)	1241	279	1241	35814	80	[TCP Dup ACK 33#1] 35814 → 80 [ACK] Seq=1241 Ack=279 Win=56704 Len=0 TSval=2055847105 TSecr=3945292480


