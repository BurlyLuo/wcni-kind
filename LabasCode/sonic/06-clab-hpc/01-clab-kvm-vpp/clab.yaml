name: vs
topology:
  nodes:
    vpp1:
      kind: generic_vm
      image: 192.168.2.100:5000/ipng:vpp-proto-bookworm-20250607
      env:
        QEMU_SMP: 6
        QEMU_MEMORY: 8192

    vpp2:
      kind: generic_vm
      image: 192.168.2.100:5000/ipng:vpp-proto-bookworm-20250607
      env:
        QEMU_SMP: 6
        QEMU_MEMORY: 8192

    server1:
      kind: linux
      image: 192.168.2.100:5000/nettool
      exec:
      - ip addr add 10.1.5.10/24 dev eth1
      - ip r a 10.1.8.0/24 via 10.1.5.1

    server2:
      kind: linux
      image: 192.168.2.100:5000/nettool
      exec:
      - ip addr add 10.1.8.10/24 dev eth1
      - ip r a 10.1.5.0/24 via 10.1.8.1

  links:
    - endpoints: ["vpp1:eth1", "vpp2:eth1"]
    - endpoints: ["vpp1:eth2", "server1:eth1"]
    - endpoints: ["vpp2:eth2", "server2:eth1"]
