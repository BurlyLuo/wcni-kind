name: ipng-vpp
prefix: ""

topology:
  nodes:
    vpp1:
      kind: fdio_vpp
      image: git.ipng.ch/ipng/vpp-containerlab:latest
      binds:
        - config/vpp1/frr.conf:/etc/frr/frr.conf
      startup-config: config/vpp1/vppcfg.yaml
      env-files:
        - config/lab-frr.env

    vpp2:
      kind: fdio_vpp
      image: git.ipng.ch/ipng/vpp-containerlab:latest
      binds:
        - config/vpp2/frr.conf:/etc/frr/frr.conf
      startup-config: config/vpp2/vppcfg.yaml
      env-files:
        - config/lab-frr.env

    h1:
      kind: linux
      image: 192.168.2.100:5000/nettool
      exec:
        - ip link set address 00:c1:ab:00:00:01 dev eth1
        - ip addr add 10.82.98.66/28 dev eth1
        - ip route add 10.82.98.0/24 via 10.82.98.65
        - ip addr add 2001:db8:8298:101::2/64 dev eth1
        - ip route add 2001:db8:8298::/48 via 2001:db8:8298:101::1
    h2:
      kind: linux
      image: 192.168.2.100:5000/nettool
      exec:
        - ip link set address 00:c1:ab:00:00:02 dev eth1
        - ip addr add 10.82.98.82/28 dev eth1
        - ip route add 10.82.98.0/24 via 10.82.98.81
        - ip addr add 2001:db8:8298:102::2/64 dev eth1
        - ip route add 2001:db8:8298::/48 via 2001:db8:8298:102::1

  links:
    - endpoints: ["vpp1:eth2", "vpp2:eth2"]
    - endpoints: ["h1:eth1", "vpp1:eth1"]
    - endpoints: ["h2:eth1", "vpp2:eth1"]
