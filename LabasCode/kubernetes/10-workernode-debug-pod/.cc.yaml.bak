topology:
  nodes:
    node1:
      kind: linux
      image: ubuntu:latest
      config:
        startup-config: |
          #!/bin/bash
          ip link add dev vxlan0 type vxlan id 1001 local 192.168.1.10 dstport 4789
          ip addr add 10.0.1.1/24 dev vxlan0
          ip link set vxlan0 up
          ip addr add 10.0.0.1/32 dev lo
          ip link set lo up
    node2:
      kind: linux
      image: ubuntu:latest
      config:
        startup-config: |
          #!/bin/bash
          ip link add dev vxlan0 type vxlan id 1001 local 192.168.1.20 dstport 4789
          ip addr add 10.0.1.2/24 dev vxlan0
          ip link set vxlan0 up
          ip addr add 10.0.0.2/32 dev lo
          ip link set lo up
  links:
    - endpoints: [node1:eth0, node2:eth0]
