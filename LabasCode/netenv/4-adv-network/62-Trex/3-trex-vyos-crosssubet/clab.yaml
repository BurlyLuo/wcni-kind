name: vs
topology:
  nodes:
    dut:
      kind: linux
      image: 192.168.2.100:5000/nettool
      exec:
        - ip a a 10.1.5.1/24 dev eth1
        - ip link set dev eth1 address 02:42:8f:01:05:10
        - ip a a 10.1.8.1/24 dev eth2
        - ip link set dev eth2 address 02:42:8f:01:08:10

    client:
      kind: linux
      image: 192.168.2.100:5000/trexcisco/trex:4.1
      exec:
        - ip addr add 10.1.5.10/24 dev eth1
        - ip addr add 10.1.8.10/24 dev eth2
      binds:
        - ./trex_cfg.yaml:/etc/trex_cfg.yaml
        - ./http_simple.yaml:/root/http_simple.yaml

      ports:
        - 4507:4507
        - 4500:4500
        - 4501:4501
      
      # stty cols 160 rows 50
      # port0: 10.1.5.10 eth1
      # port1: 10.1.8.10 eth2
 
      # Run TRex:
      # sudo ./t-rex-64 -f /root/http_simple.yaml -d 300 -m 1 -c 1 -k 5 --nc

  links:
    - endpoints: ["dut:eth1", "client:eth1"]
      mtu: 1500
    - endpoints: ["dut:eth2", "client:eth2"]
      mtu: 1500
